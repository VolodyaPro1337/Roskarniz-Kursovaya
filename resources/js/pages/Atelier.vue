<script setup lang="ts">
import { Head } from '@inertiajs/vue3';
import { onMounted, ref } from 'vue';
import Navigation from '@/components/Navigation.vue';
import CustomCursor from '@/components/CustomCursor.vue';
import gsap from 'gsap';
import { ScrollTrigger } from 'gsap/ScrollTrigger';

gsap.registerPlugin(ScrollTrigger);

// --- –î–∞–Ω–Ω—ã–µ –¥–ª—è –∏—Å—Ç–æ—Ä–∏–∏ –ø—Ä–æ–∫—Ä—É—Ç–∫–∏ (–ü—Ä–æ—Ü–µ—Å—Å) ---
const processSteps = [
    { id: 1, title: '–ó–∞–º–µ—Ä', description: '–ù–∞—à–∏ —ç–∫—Å–ø–µ—Ä—Ç—ã –ø—Ä–∏–µ–∑–∂–∞—é—Ç —Å –æ–±—Ä–∞–∑—Ü–∞–º–∏ –∏ –ª–∞–∑–µ—Ä–Ω–æ–π —Ç–æ—á–Ω–æ—Å—Ç—å—é.', icon: 'üìè' },
    { id: 2, title: '–≠—Å–∫–∏–∑', description: '–°–æ–∑–¥–∞–µ–º –≤–∏–∑—É–∞–ª–∏–∑–∞—Ü–∏—é –≤ –∏–Ω—Ç–µ—Ä—å–µ—Ä–µ –¥–æ –Ω–∞—á–∞–ª–∞ —Ä–∞–±–æ—Ç.', icon: '‚úèÔ∏è' },
    { id: 3, title: '–ü–æ—à–∏–≤', description: '–†—É—á–Ω–∞—è —Ä–∞–±–æ—Ç–∞ –≤ –Ω–∞—à–µ–º —Ü–µ—Ö—É. –ò–¥–µ–∞–ª—å–Ω—ã–µ —à–≤—ã.', icon: 'üßµ' },
    { id: 4, title: '–ú–æ–Ω—Ç–∞–∂', description: '–ß–∏—Å—Ç–∞—è —É—Å—Ç–∞–Ω–æ–≤–∫–∞ –∫–∞—Ä–Ω–∏–∑–æ–≤ –∏ —Ä–∞–∑–≤–µ—Å–∫–∞ —à—Ç–æ—Ä.', icon: 'üî®' }
];

const processContainer = ref<HTMLElement | null>(null);

// --- –°–æ—Å—Ç–æ—è–Ω–∏–µ –ø–æ—Ä—Ç—Ñ–æ–ª–∏–æ (–î–æ/–ü–æ—Å–ª–µ) ---
const sliderValue = ref(50);

// --- –°–æ—Å—Ç–æ—è–Ω–∏–µ –ú—É–¥–±–æ—Ä–¥–∞ ---
const selectedStyles = ref<string[]>([]);
const styles = [
    { id: 'minimal', name: '–ú–∏–Ω–∏–º–∞–ª–∏–∑–º', color: '#f5f5f5' },
    { id: 'classic', name: '–ö–ª–∞—Å—Å–∏–∫–∞', color: '#e5e7eb' },
    { id: 'loft', name: '–õ–æ—Ñ—Ç', color: '#525252' },
    { id: 'scandi', name: '–°–∫–∞–Ω–¥–∏', color: '#d1d5db' }
];

const toggleStyle = (id: string) => {
    if (selectedStyles.value.includes(id)) {
        selectedStyles.value = selectedStyles.value.filter(s => s !== id);
    } else {
        selectedStyles.value.push(id);
    }
};

onMounted(() => {
    // –ì–æ—Ä–∏–∑–æ–Ω—Ç–∞–ª—å–Ω–∞—è –ø—Ä–æ–∫—Ä—É—Ç–∫–∞ –ø—Ä–æ—Ü–µ—Å—Å–∞
    if (processContainer.value) {
        gsap.to(processContainer.value, {
            x: () => -(processContainer.value!.scrollWidth - window.innerWidth),
            ease: "none",
            scrollTrigger: {
                trigger: "#process-section",
                pin: true,
                scrub: 1,
                end: () => "+=" + processContainer.value!.scrollWidth,
            }
        });
    }
});
</script>

<template>
    <Head title="–ê—Ç–µ–ª—å–µ" />
    <Navigation />
    <CustomCursor />

    <div class="bg-[#050505] text-white selection:bg-white selection:text-black overflow-x-hidden font-sans">
        
        <!-- –ì–õ–ê–í–ù–´–ô –≠–ö–†–ê–ù -->
        <div class="h-screen flex items-center justify-center relative overflow-hidden">
            <div class="absolute inset-0 bg-[url('https://images.unsplash.com/photo-1540553016722-983e48a2cd10?q=80&w=2544&auto=format&fit=crop')] bg-cover bg-center opacity-30"></div>
            <div class="absolute inset-0 bg-gradient-to-t from-[#050505] via-transparent to-black/50"></div>
            
            <div class="text-center relative z-10 px-4">
                <p class="text-xs tracking-[0.3em] font-mono text-gray-400 mb-4 uppercase">Individual Tailoring</p>
                <h1 class="text-7xl md:text-9xl font-black tracking-tighter mix-blend-difference mb-8">
                    –ê–¢–ï–õ–¨–ï
                </h1>
                <p class="text-xl text-gray-300 max-w-2xl mx-auto font-light">
                    –ò—Å–∫—É—Å—Å—Ç–≤–æ —Å–æ–∑–¥–∞–Ω–∏—è —Ç–µ–∫—Å—Ç–∏–ª—è, –∫–æ—Ç–æ—Ä—ã–π –º–µ–Ω—è–µ—Ç –ø—Ä–æ—Å—Ç—Ä–∞–Ω—Å—Ç–≤–æ. <br>–û—Ç –ø–µ—Ä–≤–æ–≥–æ —ç—Å–∫–∏–∑–∞ –¥–æ —Ñ–∏–Ω–∞–ª—å–Ω–æ–π —Å–∫–ª–∞–¥–∫–∏.
                </p>
            </div>
        </div>

        <!-- 1. –ò–°–¢–û–†–ò–Ø –ü–†–û–¶–ï–°–°–ê -->
        <section id="process-section" class="h-screen overflow-hidden flex flex-col justify-center border-t border-white/5 bg-[#0a0a0a] relative">
            <div class="absolute top-10 left-10 z-10">
                <h2 class="text-4xl font-bold">–ü—Ä–æ—Ü–µ—Å—Å —Å–æ–∑–¥–∞–Ω–∏—è</h2>
            </div>
            
            <div ref="processContainer" class="flex h-[70vh] items-center pl-20 w-max">
                <div 
                    v-for="(step, index) in processSteps" 
                    :key="step.id"
                    class="w-[80vw] md:w-[60vw] h-full mx-10 flex flex-col justify-end p-10 border border-white/10 rounded-3xl bg-white/5 relative group hover:bg-white/10 transition-colors backdrop-blur-sm"
                >
                    <div class="absolute top-10 right-10 text-9xl opacity-10 font-black">{{ index + 1 }}</div>
                    
                    <!-- Content -->
                    <div class="max-w-xl relative z-10">
                        <div class="text-6xl mb-6">{{ step.icon }}</div>
                        <h3 class="text-5xl font-bold mb-4">{{ step.title }}</h3>
                        <p class="text-xl text-gray-400">{{ step.description }}</p>
                    </div>

                    <!-- –í–∏–∑—É–∞–ª—å–Ω–∞—è –∑–∞–≥–ª—É—à–∫–∞ (–õ–∏–Ω–µ–π–Ω—ã–π —Ä–∏—Å—É–Ω–æ–∫) -->
                    <div class="absolute inset-0 opacity-20 pointer-events-none">
                        <!-- –î–æ–±–∞–≤–∏—Ç—å SVG-–ø–∞—Ç—Ç–µ—Ä–Ω—ã –ø–æ–∑–∂–µ -->
                    </div>
                </div>
                <!-- –§–∏–Ω–∞–ª—å–Ω—ã–π –æ—Ç—Å—Ç—É–ø -->
                <div class="w-[20vw]"></div>
            </div>
        </section>

        <!-- 2. –ü–û–†–¢–§–û–õ–ò–û –î–û/–ü–û–°–õ–ï -->
        <section class="py-32 px-4 md:px-20 bg-black relative">
            <h2 class="text-4xl md:text-5xl font-bold mb-20 text-center">–ü—Ä–µ–æ–±—Ä–∞–∂–µ–Ω–∏–µ</h2>
            
            <div class="max-w-6xl mx-auto h-[600px] relative rounded-3xl overflow-hidden cursor-ew-resize select-none group border border-white/10">
                <!-- –ò–∑–æ–±—Ä–∞–∂–µ–Ω–∏–µ –ü–û–°–õ–ï (–ë–∞–∑–æ–≤–æ–µ) -->
                <div class="absolute inset-0 bg-cover bg-center" style="background-image: url('https://images.unsplash.com/photo-1513694203232-719a280e022f?q=80&w=2669&auto=format&fit=crop');">
                    <div class="absolute top-10 right-10 bg-black/50 backdrop-blur px-4 py-2 rounded-full text-sm font-bold uppercase tracking-wider">–ü–æ—Å–ª–µ</div>
                </div>

                <!-- –ò–∑–æ–±—Ä–∞–∂–µ–Ω–∏–µ –î–û (–û–±—Ä–µ–∑–∞–Ω–Ω–æ–µ) -->
                <div 
                    class="absolute inset-0 bg-cover bg-center border-r-2 border-white"
                    :style="{ width: sliderValue + '%', backgroundImage: 'url(\'https://images.unsplash.com/photo-1595428774223-ef52624120d2?q=80&w=2574&auto=format&fit=crop\')' }"
                >
                    <div class="absolute top-10 left-10 bg-black/50 backdrop-blur px-4 py-2 rounded-full text-sm font-bold uppercase tracking-wider">–î–æ</div>
                </div>

                <!-- –†—É—á–∫–∞ —Å–ª–∞–π–¥–µ—Ä–∞ -->
                <input 
                    type="range" 
                    min="0" 
                    max="100" 
                    v-model="sliderValue" 
                    class="absolute inset-0 w-full h-full opacity-0 cursor-ew-resize z-20"
                >
                <div 
                    class="absolute top-1/2 -translate-y-1/2 w-10 h-10 bg-white rounded-full shadow-xl flex items-center justify-center pointer-events-none z-10 mix-blend-difference"
                    :style="{ left: `calc(${sliderValue}% - 20px)` }"
                >
                    <svg class="w-6 h-6 text-black" fill="none" viewBox="0 0 24 24" stroke="currentColor"><path stroke-linecap="round" stroke-linejoin="round" stroke-width="2" d="M8 9l4-4 4 4m0 6l-4 4-4-4" transform="rotate(90 12 12)"/></svg>
                </div>
            </div>
        </section>

        <!-- 3. –ö–û–ù–°–¢–†–£–ö–¢–û–† –ú–£–î–ë–û–†–î–ê -->
        <section class="py-32 bg-[#0a0a0a] border-t border-white/5">
            <div class="max-w-7xl mx-auto px-4">
                <div class="flex flex-col md:flex-row gap-16">
                    <!-- –¢–µ–∫—Å—Ç -->
                    <div class="md:w-1/3">
                        <h2 class="text-4xl font-bold mb-6">–°–æ–∑–¥–∞–π—Ç–µ —Å–≤–æ–µ –Ω–∞—Å—Ç—Ä–æ–µ–Ω–∏–µ</h2>
                        <p class="text-gray-400 mb-8">
                            –í—ã–±–µ—Ä–∏—Ç–µ —Å—Ç–∏–ª–∏, –∫–æ—Ç–æ—Ä—ã–µ –≤–∞—Å –≤–¥–æ—Ö–Ω–æ–≤–ª—è—é—Ç, –∏ –º—ã –ø—Ä–µ–¥–ª–æ–∂–∏–º –∏–¥–µ–∞–ª—å–Ω–æ–µ —Ä–µ—à–µ–Ω–∏–µ.
                        </p>
                        
                        <div class="bg-white/5 p-6 rounded-2xl border border-white/10">
                            <h3 class="text-sm uppercase tracking-widest text-gray-500 mb-4">–í–∞—à –≤—ã–±–æ—Ä:</h3>
                            <div class="flex flex-wrap gap-2">
                                <span 
                                    v-for="style in selectedStyles" 
                                    :key="style"
                                    class="px-3 py-1 bg-white text-black rounded-full text-sm font-bold capitalize"
                                >
                                    {{ styles.find(s => s.id === style)?.name }}
                                </span>
                                <span v-if="selectedStyles.length === 0" class="text-gray-600 italic text-sm">–ù–∏—á–µ–≥–æ –Ω–µ –≤—ã–±—Ä–∞–Ω–æ</span>
                            </div>
                            <button class="w-full mt-8 py-4 bg-white text-black font-bold rounded-xl hover:bg-gray-200 transition-colors">
                                –û—Ç–ø—Ä–∞–≤–∏—Ç—å –∑–∞—è–≤–∫—É
                            </button>
                        </div>
                    </div>

                    <!-- –ò–Ω—Ç–µ—Ä–∞–∫—Ç–∏–≤–Ω–∞—è —Å–µ—Ç–∫–∞ -->
                    <div class="md:w-2/3 grid grid-cols-2 gap-4">
                        <div 
                            v-for="style in styles" 
                            :key="style.id"
                            @click="toggleStyle(style.id)"
                            class="relative aspect-[4/3] rounded-2xl overflow-hidden cursor-pointer group border-2 transition-all duration-300"
                            :class="selectedStyles.includes(style.id) ? 'border-white scale-[0.98]' : 'border-transparent opacity-60 hover:opacity-100'"
                        >
                            <div class="absolute inset-0 bg-gray-800" :style="{ backgroundColor: style.color }"></div>
                             <!-- –ó–∞–≥–ª—É—à–∫–∏ –ø–∞—Ç—Ç–µ—Ä–Ω–æ–≤ -->
                             <div class="absolute inset-0 opacity-20 bg-[url('/images/noise.png')] mix-blend-overlay"></div>
                             
                             <div class="absolute bottom-6 left-6 z-10">
                                <span class="text-2xl font-bold mix-blend-difference">{{ style.name }}</span>
                             </div>

                             <div v-if="selectedStyles.includes(style.id)" class="absolute top-4 right-4 w-8 h-8 bg-white rounded-full flex items-center justify-center text-black">
                                ‚úì
                             </div>
                        </div>
                    </div>
                </div>
            </div>
        </section>

        <!-- –§–£–¢–ï–† -->
        <div class="bg-black py-20 text-center text-white/30 text-sm border-t border-white/5">
             <p>ROSKARNIZ ATELIER ¬© 2026.</p>
        </div>

    </div>
</template>
